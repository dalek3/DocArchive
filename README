# 카카오톡 챗봇(Chatbot) 생성법

카카오 i 디벨로퍼((https://i.kakao.com/)에 접속
카카오톡 아이디로 로그인 하신 후 화면에 '카카오톡 채널 챗봇 만들기' 클릭

카카오톡 채널 개설 및 신청서 작성
위에서 '카카오톡 채널 챗봇 만들기'를 클릭하시면 OBT 신청 페이지가 나옵니다.

신청사유는 자유롭게 쓰셔도 되지만, 카카오 채널(구 플러스 친구)은 무조건 있어야 합니다.
우측 상단에 '카카오톡 채널 관리자센터'를 클릭해서 채널을 개설하셔야 합니다.
'새 채널 만들기'를 클릭하신 후, 만들어보고 싶으신 서비스의 카카오 채널을 개설합니다.

**
여기서 주의하실 점은 반드시 채널이 공개된 상태여야 OBT 승인을 받을 수 있다는 점입니다.
그렇기 때문에 채널 개설 후 '채널 관리자센터'에 들어가신 후 생성한 채널을 클릭합니다. 
그런다음 왼쪽 메뉴바에서 '프로필'을 누르시면 아래로 메뉴가 펼쳐집니다.
이때 '프로필설정'을 클릭합니다.
새로운 화면으로 바뀌면 '옵션 설정'에서 '채널 공개', '검색 허용'을 마우스로 클릭하여 off상태에서 on상태로 
바꿔줍니다.
**

** 채널URL 모를 경우 찾는 방법
'채널 관리자센터'에서 생성한 채널을 클릭합니다.
그런다음 '관리'를 누르시면 아래로 메뉴가 펼쳐집니다.
이때 '상세설정'을 클릭합니다.
바뀐 화면에서 채널URL을 찾을 수 있습니다.
**

채널 생성이 완료 되었으면 다시 OBT신청화면으로 돌아와서 신청서를 작성해주시면 됩니다.

신청완료 및 승인 대기
신청 완료 후 카카오 담담자의 승인을 기다려야 합니다.
여유를 가지고 기다리시면 근무일 기준 3~5일 내에 승인을 해주시는 것 같습니다.
일주일이 지나도 승인 안되거나 신처이 반려되는 경우가 간혹 있습니다.
그럴 땐 Kakao i Developer DevTalk(https://i.kakao.com/forum/)에 문의 글을 남기시면 친절한 대답을 받아보실 수 있습니다.

--
해당문구
 OBT 권한 신청이 완료되었습니다.

OBT를 신청해주셔서 감사합니다.
권한 심사는 보통 6일 이내로 완료되며, 심사 결과는 이메일 계정으로 전송됩니다. 
--

챗봇의 정의
챗봇이란?
대화형 인터페이스 상에서 규칙 또는 AI(인공지능)로 유저와 인터랙션을 하는 서비스의

왜 챗봇인가?
Simple: 그래픽 요소, 네비게이션. 채팅은 러닝 커브가 거의 없음
Private: 많은 사람들이 공공장소나 업무에 전화보다 텍스트를 선호
Fast: 별도의 앱 설치가 필요 없음
Personalized: 개인에 맞춘 컨텐츠와 경험을 제공할 수 있음
Spontaneous: 메시지를 즉각적으로 전달함. 시간을 절약할 수 있음

출처: https://brunch.co.kr/@gentlepie/2

**
'카카오 i 오픈빌더'
1. 아직까지는 오픈베타 기간이라 누구나 무료로 사용할 수 있다,
다른 엔진도 무료로 이용 가능하지만 일정 범위 이상의 것들을 활용하려면 과금을 해야 합니다.
베타 신청만 완료되면 과금 없이 모든 기능을 활용함은 물론이고 호출수에도 영향을 받지 않기 때문입니다.

2. 문서화가 잘되어 있어서 독학을 하는데에도 어려움이 없다.
카카오 i 오픈빌더 도움말 페이지https://i.kakao.com/docs/getting-started-overview#%EC%B1%97%EB%B4%87-%EA%B4%80%EB%A6%AC%EC%9E%90%EC%84%BC%ED%84%B0-%EC%86%8C%EA%B0%9C)
는 물론이고, 봇 디자이너들이 질문하거나 의견을 개진할 수 있는 DevTalk(https://i.kakao.com/forum)을 활용하면
누구나 무리 없이 챗봇을 알아갈 수 있습니다.

3. 카카오 채널을 통해 즉각적인 확인이 가능합니다.
아무래도 눈으로 확인할 수 잇는 성과가 있으면 배워가는데에 더 많은 흥미를 유발할 수 있습니다.


--

챗봇의 기본 개념 알아보기

먼저 우리는 챗봇의 기본 개념을 알아보기 위해 곽철용의 대사를 예시로 들어보겠습니다.
한창 유행했던 두 문장을 가져왔습니다.

"묻고 더블로 가!"
"마포대교는 무너졌냐? 이XX야?"

위의 두 문장이 챗봇에서 어떻게 처리가 되는지에 대해 알아볼까요?

챗봇의 개념 세가지
(반드시 알아야되는 개념입니다 어려우나 꼭 숙지하세요)

- #intent(인텐트): 사용자의 발화에 나타나는 의도(목적이나 목표)
- @entity(엔티티): 사용자의 발화에 존재하는 객체의 종류. 일반적으로 명사형인 경우가 대다수이면, 이를 올바르게 인식하여 사용자의 발화를 처리함에 있어서 도움을 줄 수 있스비낟.
- Utterence(어터런스): 인텐트를 표현하는 다양한 예시 문장. NLU(자연어처리) 엔진 학습을 위한 데이터

예시

Utterence: "묻고 더블로 가!"
#intent: "묻고 가!" -> 저는 이 판돈을 이어가겠습니다.
@entity: "더블로" -> 두배

Utterence: "마포대교는 무너졌냐? 이XX야?"
#intent: "무녀졌냐? 이XX야?" -> ~는 무너졌나요?
@entity: "마포대교" -> "마포대교"

이때 마포대교를 양화대교, 서강대교, 한강대교 등이 그 엔티티 안에 포함될 수 있습니다.

문제

"치즈와퍼 세트로 세개 주문해줘!"

답
Utterence: "치즈와퍼 세트로 세개 주문해줘!"
#intent: "주문해줘!" -> ~으로 주문하겠습니다.
@entity: "치즈와퍼", "세트", "세개"

{치즈와퍼} {세트}로 {세개} 주문해줘!

햄버거 종류 엔티티 '치즈와퍼' - 몬스터 X, 롱치킨버거, 통새우와처 등
단품/세트 구분하는 엔티티 '세트' - 단품, 세트
수량 엔티티 '세개' - 한개, 두개 등


---------------------------
1. 챗봇의 기본 시나리오 작성하기
뭐든지 구축하기 전에는 기획이 나와야됩니다.
챗봇 역시 기존 웹, 모바일 웹, 앱 드의 서비스 기획과 마찬가지로 기본 시나리오를 작성하시는게 선행 되어야 합니다.
https://brunch.co.kr/@dope/30
위 링크처럼 어떻게 구성할지 시나리오를 만드셔야합니다.

이 외에도 UX/UI 설계도 선행되어야 합니다.
챗봇은 기존 서비스 기회에 비하면 이 과정이 간편합니다.
카드 뷰, 버튼, 퀵리플라이 등 어떤 컴포너트를 사용할지에 대해 고민을 하신후 이를 바타으로 설계를 진행하시면 됩니다.
디자인에 대한 소요가 다른 서비스 기획에 비해 한정적이기 때문에 가볍게 다음 단계로 넘어가실 수 있습니다.

2. 챗봇의 페르소나 정의하기
이제까지는 다른 서비스 기획과 별반 다르지 않는 내용들이 었습니다.
챗봇의 페르소나 정의 부분은 확실히 짚고 넘어가셔야 합니다.
아무래도 이 부분이 다른 서비스 기획과는 다른 **대화형 UX를 활용하는 챗봇에 특화된 내용이기 때문**입니다.

기존 서비스에서 '페르소나'가 사용자의 유형을 규정하는데에만 활용되었다면, 챗봇에서는 챗봇 자체의 페르소나에 대한 규정이 필요합니다.

- AI Persona는 챗봇의 이름, 생일, 출생지, 취향, 성격 등의 인구통계학적인 특징을 말합니다.
구체적으로 챗봇의 목적과 개성의 표현에서부터 시작되며, 이름, 생일, 출생지, 호불호, 성격, 취미, 목표, 형태 등을 규정해야 합니다.

- AI Linguistic Traits는 챗봇의 말투, 대화 태도, 어휘, 잡담, 목소리 톤(TTS) 등의 언어학적인 특징을 말합니다.
구체적으로 챗봇이 메시지를 전달하는 말투, 자주 사용하는 어휘, 절대 사용하면 안되는 어휘, 스몰토크, 목소리 톤 등을 규정해야 합니다.

---
카카오 i 오픈빌더 설명

카카오 i 오픈빌더 OBT 권한을 받으신 후 챗봇을 만드시면 이런 화면을 확인하실 수 있습니다.
다른 빌더들과 비교했을 때 직관적이고 설명이 잘되어있는 편입니다.

---
시나리오
먼저 시나리오 탭을 확인합니다.
이 곳에서는 각 시나리오별 블록 생성이 가능합니다.
시나리오는 쉽게 말해 기능 단위라고 할 수 있으며, 시나리오 내에 블록을 추가하여 해당 시나리오가 작동하도록 합니다.

오픈빌더에서는  웰컴 블록, 폴백 블록, 탈출 블록 이렇게 기본 시나리오 세가지를 제공해줍니다.
탈출 블록은 각 시나리오에서 탈출하는 기능에 대한 내용이므로 별도로 서술하진 않겠습니다.

1. 웰컴 블록
사용자가 챗봇에 처음 진입했을 때 웰컴 메시지를 제공하는 역할을 합니다.
카카오 i 오픈빌더는 채팅방을 나가더라도 **최초 진입한 1회만** 웰컴 메시지를 제공하기 때문에 챗봇에 대한 안내를 정갈하게 전달하는 것이 중요합니다.
DB 다이렉트 카카오 채널의 웰컴 메시지를 예시를 통해 확인해봅니다.

2. 폴백 블록
챗봇이 사용자의 발화에 대응하지 못하는 fallback 상황에 대응하는 역할을 수행합니다.
챗봇 내에 사용자의 모든 발화를 처리하는 시나리오를 담기가 어렵기 때문에, 폴백 블록을 통해 적절한 사용자의 행동을 유도하고 친숙한 안내를 하는것이 매우 중요합니다.
이 외에 우측 상단 '+ 시나리오'버튼을 클릭 후 시나리오 내에 블록을 만들어서, 기획한 시나리오를 작성하실 수 있습니다.

----
카카오 지식 +
카카오 i 오픈빌더 내에는 챗봇을 구축하는 분들의 편의를 위해 지식+라는 기능을 탑재하고 있습니다.
지식+는 챗봇에 csv파일을 업로드하여 챗봇 사용자의 질문에 답변을 하는 기능입니다.
번거로운 등록없이 FAQ응대가 가능하기 때문에 콜센터 기능을 챗봇에 이식하기에 편리하며, 이를 적절히 활용하면 챗봇 구축에 들어가는 시간을 줄일 수 있습니다.

유형
1. 지식+ 답변 방식에는 csv 파일 내의 문답 중 사용자의 질문과 가장 유사도가 높은 답변 하나만을 출력해주는 즉문즉답형(confidence가 가장 높은 답변 출력)

즉문즉답형은 즉작적으로 답변을 출력하기 때문에 depth가 한단계 줄고 더 짧은 시간에 응대가 가능하다는 장점이 있음

2. 즉문즉답형 사용 시 잘못된 답변이 출력되는 경우가 발생할 수 있기 때문에 관련 문답 세가지를 제시하는 답안추천형(confidence가 높은 세개의 답변 중 유저가 선택)

답안 추천형은 오대응을 방지하고 사용자가 정확한 답변을 골라볼 수 있다는 장점이 있습니다.

----
스킬
- 오픈빌더 내에서는 '스킬'을 통해 API를 연결하여 동작 파라미터에 반응하는 응답형식을 설계할 수 있음.
- 외부 서비스에 데이터를 요청하거나, 특정 동작(연산, 매핑 등)이 필요할 경우 활용 가능.

----
학습
- 챗봇 내에서 처리하지 못한 fallback 발화를 최대 30일 까지 정리하여 제공함. 확인하고 학습시킬 수 있음.
- 해당 발화를 확인하고 대응이 필요한 경우 이를 학습시킬 수 있음.
- 지속적인 fallback 분석 및 학습을 통해 더욱 똑또한 챗봇으로 거듭날 수 있음.

----
분석
- 직관적인 유저 분석을 제공하여 제작자가 인사이트를 얻을 수 있음.
- 대시보드를 블록 호출수, 하용자 잔존율, 세션을 그래프로 제공.
- 사용자: 활성 사용자(사용자 정보), 사용자 세션(세션 현황, 세션 정보), 잔존율(잔존율 현황, 잔존율 정보)을 그래프로 제공
- 챗봇: 기간별 블록 호출 수 및 사용 비율을 제공함.
- 보고서: 블록별 발화, 블록 호출 수, 사용자 수 데이터를 일자별 보고서 형태로 다운로드 가능.

----
배포 및 작업이력
- 오픈빌더 구축 및 수정 후에는 배포를 진행해야 실제 챗봇에 반영이 됨.
- 시나리오, 블록, 엔티티, 스킬, 학습 등의 작업 이력을 시간순으로 확인할 수 있음.

----
머신러닝
- 오픈빌더 내엥서 어터런스 입력 후 머신러닝을 통해 더욱 다양한 사용자 발화에 대응이 가능함
- 머신러닝을 위해서는 20개 이상의 어터런스가 존재해야함.

----
관리자 및 설정
- 봇 디자이너를 추가하고 권한을 설정하여 공동작업이 가능함.
- 봇의 기본정보, 연결 채널 등의 설정을 할 수 있음.

----
엔티티
- 사용자 발화 중 처리해야하는 엔티티를 추가 및 학습 시킬 수 있음.
- 커스터마이징이 필요 없는 일반적인 엔티티는 기본적으로 제공되는 시스템 엔티티를 활용하여 처리할 수 있음.

----
봇테스트
- 에뮬레이터를 통해 디자인한 챗봇이 어떻게 동작하는지 즉각적으로 확인이 가능.
- 블록 연결에 대한 확인은 불가하기 때문에 onclick 이벤트는 확인이 어려움


-------------------------
실제 채널 챗봇 만들기

웰컴 블록 구성하기
기본 시나리오 중 웰컴 블록을 작성
웰컴 메시지는 최초 1회만 출력되기 때문에 사용자가 첫 화면(기본 화면)을 호출하는 법을 익히게 끔 유도

폴백 블록 구성하기
기본 시나리오 중 폴백 블록을 작성
폴백 블록은 사용자들이 챗봇에 익숙하지 않은 시전에 빈번히 호출되기 때문에, 첫 화면 (기본 화면)으로 이동 가능한 바로 응답 추가

첫 화면 만들기
첫 화면을 구성하고, 이를 호출하는 의도를 가진 사용자 발화 예시(어터런스)를 입력
사용자가 직접 입력하지 않아도 확인해 볼 수 있도록 발화 전송 바로응답 추가

조회 시나리오 만들기
엔티티가 포함되는 조회 화면을 구성하고, 이를 호출하는 의도를 가진 사용자 발화 예시(어터런스) 및 패턴을 입력.
사용자가 직접입력하지 않아도 첫 화면으로 이동할 수 있도록 바로응답 추가

엔티티가 포함되지 않는 날씨 조회 화면을 구성하고, 이를 호출하는 의도를 가진 사용자 발화 예시(어터런스)를 입럭.
빌더 내의 파라미터 설정 및 되묻기 질물을 통해서도 지역명 엔티티를 받을 수 있음.

연동 및 배포하기
카카오 채널과 오픈 빌더 챗봇 연동하기
